<!DOCTYPE html>
<p>DO NOT SUBMIT - practice only</p>
<html>
<head>
    <title>practice dynamic forms only - DO NOT SUMBIT</title>
    </head>
<body>

    <h2>The XMLHttpRequest Object</h2>

    <select id="select" size="3">
        <option value="solar">solar</option>
        <option value="wind">wind</option>
       
    </select>
    <br>
    <br>

    <select id="select2" size="3">
        <option value=""></option>
        <option value=""></option>
       
    </select>
    <select id="select3" size="3">
        <option value=""></option>
        <option value=""></option>
       
    </select>
    <select id="select4" size="3">
        <option value=""></option>
        <option value=""></option>
       
    </select>
    
   
    <!--h1 id="table1"></h1>
    <select id="roof" size="3">
        <option value="volvo">volvo</option>
        <option value="saab">volvo</option>
        <option value="opel">volvo</option>
        <option value="audi">volvo</option>
    </select-->
   
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script>
        /*$(document).ready(function(){
          $("#button").click(function(){
            var i=0;
            $("#select2>option").each(function(){

              var x=["contr1","contr2"];

              $(this).text(x[i]);
              $(this).val(x[i]);
              alert($(this).val());
              i++;
            });
          });
        }); */
       
        document.getElementById("select").addEventListener("click", showHint);

        //function showHint(str) {

        function showHint() {
            var xhttp;
            //console.log(this.value);
            var selected = this.value;
            /*if (str.length == 0) {
              document.getElementById("txtHint").innerHTML = "";
              return;
            }*/

            var xhttp = new XMLHttpRequest();
            //console.log(xhttp.statusText);

            xhttp.onreadystatechange = function() {

                if (this.readyState == 4) {
                   
                    //console.log(this.responseText);
                    var obj = JSON.parse(this.responseText);
                    /*$.each(obj.solar,function(key,value){
                        console.log(key,value);
                    }); */
                    //console.log(obj);
                    //console.log(obj.solar.roof);
                   
                    $('#select2').empty();
                    $('#select3').empty();
                    $('#select4').empty();
                    if (selected == "solar") {
                        var roof = obj.solar.roof;
                        //roof= ["roof size", "roof warranty", "roof slope direction","roof weight support"]
                       
                        for (i = 0; i < roof.length; i++) {
                            //console.log(roof[i]);
                            var str = '<option value="' + roof[i] + '">' + roof[i] + '</option>';
                            $('#select2').append(str);
                        }
                       
                        var costs = obj.solar.costs;
                        //roof= ["roof size", "roof warranty", "roof slope direction","roof weight support"]
                       
                        for (i = 0; i < costs.length; i++) {
                            //console.log(roof[i]);
                            var str = '<option value="' + costs[i] + '">' + costs[i] + '</option>';
                            $('#select3').append(str);
                        }
                        var contractors = obj.solar.contractors;
                        //roof= ["roof size", "roof warranty", "roof slope direction","roof weight support"]
                       
                        for (i = 0; i < contractors.length; i++) {
                            //console.log(roof[i]);
                            var str = '<option value="' + contractors[i] + '">' + contractors[i] + '</option>';
                            $('#select4').append(str);
                        }
                    }
                   
                    if (selected == "wind") {
                        var roof = obj.wind.cost;
                        for (i = 0; i < roof.length; i++) {
                            //console.log(roof[i]);
                            var str = '<option value="' + roof[i] + '">' + roof[i] + '</option>';
                            $('#select2').append(str);
                        }
                    }

               
                }

            };

            xhttp.open("GET", "https://raw.githubusercontent.com/eshanis/dynamic-form/main/df.json", true);
            xhttp.send();
        }

    </script>

</body>

</html>
